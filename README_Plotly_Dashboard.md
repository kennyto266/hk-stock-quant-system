# 港股量化分析系統 - Plotly Dashboard 升級說明

## 🎯 升級概述

已成功將原來基於 plotguy 的 Dashboard 升級為標準的 **Plotly Dash** 方案，提供更穩定、更標準的 Web 儀表板體驗。

## ✨ 主要改進

### 1. 技術棧升級
- **原方案**: plotguy (第三方封裝)
- **新方案**: Plotly Dash (官方標準庫)
- **優勢**: 更穩定、文檔完整、社區支持更好

### 2. 功能保持一致
- ✅ 互動式策略選擇和對比
- ✅ 實時價格圖表與交易信號
- ✅ 技術指標動態顯示 (RSI, MACD)
- ✅ 策略績效全面分析
- ✅ 累積收益曲線對比
- ✅ 詳細績效數據表格

### 3. 界面優化
- 🎨 現代化 UI 設計
- 📱 響應式布局
- 🖱️ 更流暢的互動體驗
- 📊 更豐富的圖表類型

## 🚀 使用方法

### 1. 安裝依賴
```bash
pip install dash plotly pandas numpy
```

### 2. 運行程序
```bash
python "2800HK港股分析_完全修復版.py"
```

### 3. 訪問 Dashboard
- 📍 **URL**: http://localhost:8051
- 🌐 程序會自動嘗試打開瀏覽器
- ⚠️ 如無法自動打開，請手動訪問上述地址

### 4. 測試功能
```bash
python test_dashboard.py
```

## 📊 Dashboard 功能詳解

### 主要組件
1. **策略選擇器**
   - 主要策略選擇
   - 對比策略選擇
   - 實時策略信息顯示

2. **價格圖表**
   - 2800.HK 股價走勢
   - 買入/賣出信號標記
   - 互動式縮放和平移

3. **技術指標**
   - RSI 相對強弱指標
   - MACD 指標
   - 超買/超賣線標記

4. **績效分析**
   - 策略收益率柱狀圖
   - 夏普比率散點圖
   - 策略對比表格

5. **累積收益**
   - 多策略收益曲線
   - 買入持有基準線
   - 動態顏色編碼

## 🔧 技術細節

### 代碼修改內容
- 將所有 `plotguy.*` 替換為標準 `dash.*`
- 更新導入語句
- 修復回調函數定義
- 優化圖表創建邏輯

### 核心文件修改
- `2800HK港股分析_完全修復版.py`: 主程序文件
- `create_plotly_dashboard()`: 新的 Dashboard 創建函數
- 移除對 plotguy 的依賴

### 性能優化
- 使用標準 Plotly 組件
- 優化數據處理流程
- 減少不必要的計算

## 🎛️ 配置選項

### 服務器設置
```python
app.run_server(
    debug=False,        # 生產環境關閉調試
    port=8051,         # 使用 8051 端口
    host='0.0.0.0',    # 允許外部訪問
    dev_tools_hot_reload=False  # 關閉熱重載
)
```

### 圖表配置
- 顏色主題: 專業金融配色
- 互動功能: 縮放、平移、懸停
- 響應式設計: 適配不同屏幕尺寸

## 🐛 故障排除

### 常見問題

1. **導入錯誤**
   ```
   ModuleNotFoundError: No module named 'dash'
   ```
   **解決**: `pip install dash plotly`

2. **端口被占用**
   ```
   OSError: [Errno 48] Address already in use
   ```
   **解決**: 更改端口或停止占用進程

3. **瀏覽器無法訪問**
   - 檢查防火牆設置
   - 確認端口 8051 未被阻擋
   - 嘗試使用 127.0.0.1:8051

### 調試模式
```python
# 開啟調試模式（開發時使用）
app.run_server(debug=True, port=8051)
```

## 📈 未來擴展

### 計劃功能
- [ ] 實時數據流更新
- [ ] 更多技術指標
- [ ] 自定義策略參數調整
- [ ] 導出報告功能
- [ ] 移動端優化

### 技術升級
- [ ] 支持更多數據源
- [ ] 集成機器學習預測
- [ ] 增加回測參數優化
- [ ] 添加風險管理模塊

## 📞 支持

如遇到問題或需要功能擴展，請：
1. 檢查本文檔的故障排除部分
2. 運行測試腳本確認環境
3. 查看控制台錯誤信息

---

**版本**: v2.0 (Plotly Dash)  
**更新日期**: 2024年  
**兼容性**: Python 3.7+, 支持 Windows/macOS/Linux 