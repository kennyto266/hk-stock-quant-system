# 港股量化分析系統 - 模式使用指南

## 🎯 系統概覽

港股量化分析系統現在支援四種不同的分析模式，每種模式都有其特定的用途和優化方法。

## 📊 模式詳細說明

### 1. 快速分析模式 (analysis)
```bash
python main.py --mode analysis
```

**特點：**
- 使用快速掃描算法
- 測試基本技術指標參數組合
- 運行時間：約 2-5 分鐘
- 適合：日常快速檢查和初步分析

**處理流程：**
1. 載入 2800.HK 股票數據（2020-01-01 至今）
2. 執行 RSI、MACD、布林帶基本策略優化
3. 輸出最佳參數和簡要績效報告

### 2. 暴力搜索模式 (brute)
```bash
python main.py --mode brute
```

**特點：**
- 智能RSI策略深度優化
- 包含快速掃描 + 精細搜索 + 並行優化
- 運行時間：約 10-30 分鐘
- 適合：尋找最優 RSI 參數組合

**處理流程：**
1. **階段1：快速掃描** - 大步長搜索有效參數區域
2. **階段2：精細搜索** - 在最佳區域周圍小步長優化
3. **階段3：結果驗證** - 生成詳細報告和CSV文件

**輸出文件：**
- `data_output/csv/integrated_rsi_quick_scan_*.csv`
- `data_output/csv/integrated_rsi_detailed_*.csv`
- `data_output/reports/integrated_rsi_optimization_*.txt`

### 3. 全策略模式 (all)
```bash
python main.py --mode all
```

**特點：**
- 最全面的分析模式
- 整合技術指標 + 北南水 + 非價格策略
- 運行時間：約 30-60 分鐘
- 適合：完整系統性分析

**處理流程：**
1. **步驟1：技術指標策略** - 7種技術指標全面優化
2. **步驟2：北南水策略** - 基於北向資金流的策略分析
3. **步驟3：非價格策略** - 整合多種非價格數據的策略
4. **自動啟動Dashboard** - 分析完成後自動展示結果

### 4. 儀表板模式 (dashboard)
```bash
python main.py --mode dashboard
```

**特點：**
- 純網頁界面展示
- 不執行任何分析，直接啟動Dashboard
- 實時互動圖表
- 適合：查看之前的分析結果

**訪問地址：**
- 增強版：http://127.0.0.1:8051/
- 標準版：http://127.0.0.1:8050/
- 基礎版：http://127.0.0.1:8052/

## 🔧 使用建議

### 初次使用者
```bash
# 1. 先快速了解系統
python main.py --mode analysis

# 2. 查看結果
python main.py --mode dashboard
```

### 策略研究者
```bash
# 深度優化 RSI 參數
python main.py --mode brute
```

### 完整分析
```bash
# 全面策略測試（包含Dashboard）
python main.py --mode all
```

## 📁 輸出文件結構

```
data_output/
├── csv/                    # 策略結果CSV檔案
│   ├── strategy_*.csv      # 技術指標策略結果
│   ├── integrated_rsi_*.csv # RSI暴力搜索結果
│   ├── north_south_*.csv   # 北南水策略結果
│   └── nonprice_*.csv      # 非價格策略結果
├── reports/                # 文字報告
│   └── *.txt              # 詳細分析報告
└── backtest_results/       # 回測結果
    └── *.csv              # 績效數據
```

## ⚠️ 注意事項

1. **依賴環境**：確保已安裝所有必要套件
   ```bash
   pip install -r requirements.txt
   ```

2. **數據來源**：系統會自動從 Yahoo Finance 獲取數據

3. **運行時間**：
   - analysis: 2-5 分鐘
   - brute: 10-30 分鐘  
   - all: 30-60 分鐘
   - dashboard: 即時

4. **記憶體使用**：暴力搜索模式可能佔用較多記憶體

5. **網路連接**：需要穩定的網路連接以獲取股票數據

## 🐛 故障排除

### 常見問題

**問題1：ModuleNotFoundError**
```bash
# 解決方法：安裝缺失的套件
pip install [套件名稱]
```

**問題2：數據獲取失敗**
```bash
# 解決方法：檢查網路連接，稍後重試
```

**問題3：Dashboard 無法啟動**
```bash
# 解決方法：檢查端口是否被佔用
netstat -an | findstr 8050
```

## 📞 技術支援

如遇到問題，請檢查：
1. 日誌文件：`logs/` 目錄
2. 錯誤輸出：終端顯示的錯誤信息
3. 系統要求：Python 3.8+，足夠的記憶體和磁碟空間